import{_ as p}from"./plugin-vue_export-helper-c27b6911.js";import{r as e,o,c,a as n,b as a,d as t,e as i}from"./app-991790b5.js";const l={},u=i(`<h3 id="ä»€ä¹ˆæ˜¯é˜²æŠ–å’ŒèŠ‚æµ-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯é˜²æŠ–å’ŒèŠ‚æµ-æœ‰ä»€ä¹ˆåŒºåˆ«" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯é˜²æŠ–å’ŒèŠ‚æµï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>ä½ åœ¨å®é™…å¼€å‘ä¸­è‚¯å®šå†™è¿‡è¿™æ ·çš„ä¸šåŠ¡éœ€æ±‚ï¼Œéšç€æ»šåŠ¨æ¡æ»šåŠ¨åˆ¤æ–­æ»šåŠ¨è·ç¦»ï¼Œå®ç°å¯¼èˆªæ å›ºå®šåœ¨é¡¶éƒ¨ã€ä¸ºé¡µé¢ä¸åŒä¸šåŠ¡æ¨¡å—æ·»åŠ æ»šåŠ¨åˆ°å¯è§†åŒºåŸŸæ˜¾ç¤ºåŠ¨ç”»ç­‰éœ€æ±‚ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ä»£ç åœ¨æ¯ä¸€æ¬¡æ»šåŠ¨äº‹ä»¶è§¦å‘æ—¶ä¾¿ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œæ»šåŠ¨äº‹ä»¶å±äºé«˜é¢‘äº‹ä»¶ï¼Œè§¦å‘ååˆ™å¯èƒ½å¯¼è‡´æµè§ˆå™¨å¡æ­»ï¼Œå¿…é¡»å¯¹å…¶è¿›è¡Œé˜²æŠ–æˆ–èŠ‚æµå¤„ç†è¿›è€Œæ§åˆ¶æ‰§è¡Œæ¬¡æ•°ã€‚</p><p>å¸¸è§çš„éœ€è¦é˜²æŠ–æˆ–èŠ‚æµé¢„å¤„ç†çš„äº‹ä»¶æœ‰ï¼š</p><p>ğŸ“¢é¼ æ ‡äº‹ä»¶ï¼Œonmousedownå’Œonmousemoveï¼Œè¿ç»­ç‚¹å‡»å’Œç§»åŠ¨</p><p>ğŸ“¢è¾“å…¥äº‹ä»¶ï¼Œonkeyupå’Œonkeydown</p><p>ğŸ“¢windowï¼Œresizeå’Œscroll</p><h5 id="é˜²æŠ–-debounce" tabindex="-1"><a class="header-anchor" href="#é˜²æŠ–-debounce" aria-hidden="true">#</a> é˜²æŠ–ï¼ˆdebounceï¼‰</h5><p><code>è§¦å‘é«˜é¢‘äº‹ä»¶åï¼Œnç§’å†…äº‹ä»¶å†æ¬¡è§¦å‘ï¼Œåˆ™é‡æ–°å¼€å§‹è®¡æ—¶ï¼Œç›´åˆ°nç§’å†…åªè§¦å‘äº†ä¸€æ¬¡ï¼Œåˆ™æ‰§è¡Œå‡½æ•°</code>ã€‚æˆ‘ä»¬ç”¨ä¹˜åç”µæ¢¯æ¥æ‰“ä¸ªæ¯”æ–¹ï¼ˆä¸è€ƒè™‘ç”µæ¢¯è¶…è½½ï¼‰ï¼Œå½“ç”µæ¢¯é—¨è¦å…³é—­æ—¶ï¼Œçªç„¶åˆæœ‰äººéœ€è¦ä¹˜åç”µæ¢¯ï¼Œæ­¤æ—¶ç”µæ¢¯å¹¶æ²¡æœ‰æ”¹å˜æ¥¼å±‚ï¼Œè€Œæ˜¯å†æ¬¡æ‰“å¼€äº†ç”µæ¢¯é—¨ã€‚è¿™æ ·ç”µæ¢¯å»¶è¿Ÿäº†æ”¹å˜æ¥¼å±‚çš„åŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿä¼˜åŒ–äº†èµ„æºï¼ˆä¸€æ¬¡ï¼‰ã€‚</p><h5 id="èŠ‚æµ-throttle" tabindex="-1"><a class="header-anchor" href="#èŠ‚æµ-throttle" aria-hidden="true">#</a> èŠ‚æµï¼ˆthrottleï¼‰</h5><p><code>è§¦å‘é«˜é¢‘äº‹ä»¶åï¼Œnç§’å†…äº‹ä»¶å¤šæ¬¡è§¦å‘åªæ‰§è¡Œä¸€æ¬¡ã€‚</code> è¿™å°±å¥½æ¯”&#39;æ°´æ»´æ•ˆåº”&#39;ğŸ’§æ°´ç§¯æ”’åˆ°ä¸€å®šé‡é‡æ‰ä¼šä¸‹è½ã€‚</p><h5 id="äºŒè€…åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#äºŒè€…åŒºåˆ«" aria-hidden="true">#</a> äºŒè€…åŒºåˆ«</h5><p>é˜²æŠ–å’ŒèŠ‚æµçš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨å¤„ç†å‡½æ•°<strong>æ‰§è¡Œæ¬¡æ•°çš„ä¸åŒ</strong>ã€‚</p><p>ğŸ‘£é˜²æŠ–å°†å¤šæ¬¡æ‰§è¡Œå˜ä¸º<strong>æœ€åæ‰§è¡Œä¸€æ¬¡</strong> ï¼Œ<code>å½’ä¸€</code>ï¼›</p><p>ğŸ‘£èŠ‚æµå°†å¤šæ¬¡æ‰§è¡Œå˜æˆ<strong>æ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œä¸€æ¬¡</strong> ï¼Œ<code>ç¨€é‡Š</code>ï¼›</p><h3 id="é˜²æŠ–å®ç°" tabindex="-1"><a class="header-anchor" href="#é˜²æŠ–å®ç°" aria-hidden="true">#</a> é˜²æŠ–å®ç°</h3><p>âšª<strong>é’é“œ</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> wait</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token comment">// ç»´æŠ¤ä¸€ä¸ªtimer</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// é€šè¿‡\`this\`å’Œ\`arguments\`ç¼“å­˜å‡½æ•°çš„ä½œç”¨åŸŸå’Œå‚æ•°</span>
    <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ¸…é™¤æœ€åä¸€æ¬¡ç‚¹å‡»ä¹‹å‰è§¦å‘çš„äº‹ä»¶</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ³¨æ„ fnæ— è¿”å›å€¼ï¼ˆé»˜è®¤undefinedï¼‰</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ğŸ”˜<strong>ç™½é“¶</strong></p><p>æ·»åŠ immediateå‚æ•°ï¼Œ<strong>æ§åˆ¶è§¦å‘åæ˜¯å¦ç«‹å³æ‰§è¡Œ</strong>ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> wait <span class="token operator">=</span> <span class="token number">800</span><span class="token punctuation">,</span> immediate <span class="token operator">=</span> <span class="token boolean">true</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
<span class="token operator">+</span>   timer <span class="token operator">&amp;&amp;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span>   <span class="token keyword">if</span> <span class="token punctuation">(</span>immediate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>     <span class="token comment">// é¦–æ¬¡è§¦å‘ï¼Œtimeré»˜è®¤ä¸ºå‡å€¼ã€‚</span>
<span class="token operator">+</span>     <span class="token comment">// è‹¥è¿ç»­è§¦å‘ï¼Œåˆ™timerä¸ºsetTimeoutè¿”å›çš„æœ€æ–°çš„IDå€¼[Number]ï¼Œåˆ™runNowä¸ºfalseã€‚</span>
<span class="token operator">+</span>     <span class="token keyword">let</span> runNow <span class="token operator">=</span> <span class="token operator">!</span>timer<span class="token punctuation">;</span>
<span class="token operator">+</span>     <span class="token comment">// æŒ‡å®šæ—¶é—´waitè¿‡åæ‰å°†å®šæ—¶å™¨æ¸…é™¤</span>
<span class="token operator">+</span>     timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>       timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token operator">+</span>     <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span>runNow<span class="token punctuation">)</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// æ³¨æ„ fnæ— è¿”å›å€¼ï¼ˆé»˜è®¤undefinedï¼‰</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>âš«<strong>é»„é‡‘</strong></p><p><strong>ä¸ºäº‹ä»¶å¤„ç†å‡½æ•°fnæ·»åŠ è¿”å›å€¼</strong>ã€‚ç›®å‰è¦è¿”å›å€¼çš„è¯ï¼Œåªèƒ½åœ¨immediateä¸ºtrueæ—¶è¿”å›ã€‚å› ä¸ºelseè¯­å¥ä¸­ä¸ºå¼‚æ­¥ä»£ç æ‰§è¡Œï¼Œæ‰€ä»¥è¿”å›çš„éƒ½æ˜¯undefinedã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> wait <span class="token operator">=</span> <span class="token number">800</span><span class="token punctuation">,</span> immediate <span class="token operator">=</span> <span class="token boolean">true</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    timer <span class="token operator">&amp;&amp;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>immediate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// é¦–æ¬¡è§¦å‘ï¼Œtimeré»˜è®¤ä¸ºå‡å€¼ã€‚</span>
      <span class="token comment">// è‹¥è¿ç»­è§¦å‘ï¼Œåˆ™timerä¸ºsetTimeoutè¿”å›çš„æœ€æ–°çš„IDå€¼[Number]ï¼Œåˆ™runNowä¸ºfalseã€‚</span>
      <span class="token keyword">let</span> runNow <span class="token operator">=</span> <span class="token operator">!</span>timer<span class="token punctuation">;</span>
      <span class="token comment">// æŒ‡å®šæ—¶é—´waitè¿‡åæ‰å°†å®šæ—¶å™¨æ¸…æ¥š</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span>runNow<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> 
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ğŸ”µ<strong>é“‚é‡‘</strong></p><p>å®ç°åœ¨<strong>ç­‰å¾…æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å–æ¶ˆå»¶è¿Ÿå¹¶ç«‹å³æ‰§è¡Œå‡½æ•°fn</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> wait <span class="token operator">=</span> <span class="token number">800</span><span class="token punctuation">,</span> immediate <span class="token operator">=</span> <span class="token boolean">true</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">+</span> <span class="token keyword">let</span> timer<span class="token punctuation">,</span> debounced<span class="token punctuation">;</span>
<span class="token operator">+</span> <span class="token function-variable function">debounced</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    timer <span class="token operator">&amp;&amp;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>immediate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// é¦–æ¬¡è§¦å‘ï¼Œtimeré»˜è®¤ä¸ºå‡å€¼ã€‚</span>
      <span class="token comment">// è‹¥è¿ç»­è§¦å‘ï¼Œåˆ™timerä¸ºsetTimeoutè¿”å›çš„æœ€æ–°çš„IDå€¼[Number]ï¼Œåˆ™runNowä¸ºfalseã€‚</span>
      <span class="token keyword">let</span> runNow <span class="token operator">=</span> <span class="token operator">!</span>timer<span class="token punctuation">;</span>
      <span class="token comment">// æŒ‡å®šæ—¶é—´waitè¿‡åæ‰å°†å®šæ—¶å™¨æ¸…æ¥š</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>runNow<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token operator">+</span> debounced<span class="token punctuation">.</span><span class="token function-variable function">cancel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>   <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
<span class="token operator">+</span>   timer <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token operator">+</span> <span class="token punctuation">}</span>
<span class="token operator">+</span> <span class="token keyword">return</span> debounced
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="èŠ‚æµå®ç°" tabindex="-1"><a class="header-anchor" href="#èŠ‚æµå®ç°" aria-hidden="true">#</a> èŠ‚æµå®ç°</h3><p>ğŸ”˜<strong>ç™½é“¶ï¼ˆæ—¶é—´æˆ³ï¼‰</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//æŒ‡å®šæ—¶é—´å†…è§¦å‘ï¼Œæ—¶é—´ä¸€åˆ°å°±ä¼šè§¦å‘ï¼ˆä¸ç®¡ä½ æ‰§è¡Œäº†å¤šå°‘æ¬¡ï¼‰</span>
<span class="token comment">//æ€è·¯ï¼šå®šä¹‰ä¸€ä¸ªä¸Šæ¬¡çš„æ—¶é—´ï¼Œæ—¶é—´è§¦å‘è·å–å½“å‰æ—¶é—´ï¼Œæ»¡è¶³ã€å½“å‰æ—¶é—´-ä¸Šæ¬¡æ—¶é—´&gt;å»¶è¿Ÿæ—¶é—´ã€‘åˆ™è§¦å‘ï¼Œç„¶åæ›´æ–°ä¸Šæ¬¡æ—¶é—´previousã€‚</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> previous <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> previous <span class="token operator">&gt;</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
      previous <span class="token operator">=</span> now<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ğŸ”˜<strong>ç™½é“¶ï¼ˆå®šæ—¶å™¨ï¼‰</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// æ€è·¯ï¼šäº‹ä»¶è§¦å‘æ—¶ï¼Œè®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå®šæ—¶å™¨æœªæ‰§è¡Œå‰å†æ¬¡è§¦å‘äº‹ä»¶åˆ™ä¸æ‰§è¡Œï¼›å®šæ—¶å™¨æ‰§è¡Œï¼Œåˆ™æ‰§è¡Œå‡½æ•°ï¼Œç„¶åæ¸…ç©ºå®šæ—¶å™¨ï¼Œå†è®¾ç½®ä¸‹ä¸€ä¸ªå®šæ—¶å™¨ã€‚</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>âš«<strong>é»„é‡‘</strong></p><p>åˆäºŒä¸ºä¸€ï¼ˆæœ‰å¤´æœ‰å°¾ï¼‰ï¼›æœ‰å¤´â€”â€”è§¦å‘æ—¶ä¾¿æ‰§è¡Œä¸€æ¬¡ï¼Œç¬¬ä¸€æ¬¡é—´éš”åˆ°äº†å†æ‰§è¡Œä¸€æ¬¡ï¼›æœ‰å°¾â€”â€”åœæ­¢è§¦å‘ï¼Œä¼šæ›´æ ¹æ®è®¡ç®—æ¡ä»¶å†æ‰§è¡Œä¸€æ¬¡</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// ç¬¬ä¸€æ¬¡è§¦å‘å³æ‰§è¡Œï¼Œç„¶åæ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œï¼Œæœ€ååœæ­¢å†æ—¶é—´é—´éš”ç»“æŸæ—¶æ‰§è¡Œä¸€æ¬¡</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer<span class="token punctuation">,</span> context<span class="token punctuation">,</span> args<span class="token punctuation">,</span>
      <span class="token comment">// è®°å½•ä¸Šæ¬¡è§¦å‘çš„æ—¶é—´</span>
      previous <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> now <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">//ä¸‹æ¬¡è§¦å‘fnå‰©ä½™çš„æ—¶é—´</span>
        remaining <span class="token operator">=</span> delay <span class="token operator">-</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> previous<span class="token punctuation">)</span><span class="token punctuation">;</span>
    context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token comment">// æ— å‰©ä½™æ—¶é—´ï¼Œæˆ–ç³»ç»Ÿæ—¶é—´æ”¹å˜(äººä¸º)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>remaining <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span> remaining <span class="token operator">&gt;</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// é¦–æ¬¡è§¦å‘ä¼šç«‹å³æ‰§è¡Œæœ¬éƒ¨åˆ†</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      previous <span class="token operator">=</span> now<span class="token punctuation">;</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// è®¾ç½®å®šæ—¶å™¨</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
        previous <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> remaining<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// æ­£å¸¸ä¸€æ¬¡è¿ç»­è§¦å‘çš„æ‰§è¡Œåº”è¯¥æ˜¯ï¼š ä¸€æ¬¡ifï¼Œç„¶åæ¯æ¬¡éƒ½æ˜¯else ifï¼ˆæœ€åä¸€æ¬¡ä¹Ÿæ˜¯ï¼‰ï¼Œ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="underscoreä¸­é˜²æŠ–å’ŒèŠ‚æµæºç è§£æ" tabindex="-1"><a class="header-anchor" href="#underscoreä¸­é˜²æŠ–å’ŒèŠ‚æµæºç è§£æ" aria-hidden="true">#</a> underscoreä¸­é˜²æŠ–å’ŒèŠ‚æµæºç è§£æ</h3><h3 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h3><p>é˜²æŠ–å’ŒèŠ‚æµä¸»è¦æ˜¯æ»¡è¶³æ€§èƒ½ä¼˜åŒ–éœ€æ±‚å®ç°ï¼Œé¿å…æ„å¤–é”™è¯¯ã€‚</p><h5 id="ğŸ”—å‚è€ƒ" tabindex="-1"><a class="header-anchor" href="#ğŸ”—å‚è€ƒ" aria-hidden="true">#</a> ğŸ”—<strong>å‚è€ƒ</strong></h5>`,38),r={href:"https://github.com/mqyqingfeng/Blog/issues/26",target:"_blank",rel:"noopener noreferrer"},k={href:"https://github.com/mqyqingfeng/Blog/issues/22",target:"_blank",rel:"noopener noreferrer"},d={href:"https://underscorejs.net/",target:"_blank",rel:"noopener noreferrer"};function m(v,b){const s=e("ExternalLinkIcon");return o(),c("div",null,[u,n("ul",null,[n("li",null,[n("a",r,[a("èŠ‚æµ"),t(s)])]),n("li",null,[n("a",k,[a("é˜²æŠ–"),t(s)])]),n("li",null,[n("a",d,[a("underscore"),t(s)])])])])}const y=p(l,[["render",m],["__file","é˜²æŠ–å’ŒèŠ‚æµ.html.vue"]]);export{y as default};
